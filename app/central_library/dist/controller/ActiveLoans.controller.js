sap.ui.define(["./Basecontroller"],function(e){"use strict";return e.extend("com.app.centrallibrary.controller.ActiveLoans",{onInit:function(){},onpresscloseLoan:async function(e){if(this.byId("idUserLoans").getSelectedItems().length>1){MessageToast.show("Please Select only one Book");return}var s=this.byId("idUserLoans").getSelectedItem().getBindingContext().getObject(),o=s.books.availability+1;var t=new Date;const i=new sap.ui.model.json.JSONModel({books_ID:s.books.ID,users_ID:s.users_ID,loanclosedDate:t,books:{availability:o}});this.getView().setModel(i,"userModel");const n=this.getView().getModel("userModel").getProperty("/"),a=this.getView().getModel("ModelV2");try{await this.createData(a,n,"/History");debugger;sap.m.MessageBox.success(s.books.title+"Loan Closed successfully");this.byId("idUserLoans").getSelectedItem().getBindingContext().delete("$auto");a.update("/Book("+s.books.ID+")",n.books,{success:function(){},error:function(e){sap.m.MessageBox.error("Failed to update book: "+e.message)}.bind(this)})}catch(e){sap.m.MessageBox.error("Some technical Issue")}},onpressBack:function(){window.history.back()},onpresshistory:async function(){if(!this.ohistory){this.ohistory=await this.loadFragment("history")}this.ohistory.open()},onHistoryscancelbtn:function(){if(this.ohistory.isOpen()){this.ohistory.close()}}})});
//# sourceMappingURL=ActiveLoans.controller.js.map